/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { aaveV3AaveUserPositionPerToken } from "../../funcs/aaveV3AaveUserPositionPerToken.js";
import * as operations from "../../models/operations/index.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  request: operations.V1AaveUserPositionPerTokenRequest$inboundSchema,
};

export const tool$aaveV3AaveUserPositionPerToken: ToolDefinition<typeof args> =
  {
    name: "aave-v3-aave-user-position-per-token",
    description: `Positions - per Token

This endpoint retrieves the user's position for a specific token on the AAVE
platform.

It provides key financial metrics including the current aToken balance, current
stable debt, current variable debt, principal stable debt, principal variable debt,
stable borrow rate, stable borrow rate for new loans, variable borrow rate, and
liquidity rate. These metrics are calculated by aggregating data across all open
positions held by the user for the specified token, offering a detailed view of
their financial standing within the AAVE ecosystem.`,
    args,
    tool: async (client, args, ctx) => {
      const [result, apiCall] = await aaveV3AaveUserPositionPerToken(
        client,
        args.request,
        { fetchOptions: { signal: ctx.signal } },
      ).$inspect();

      if (!result.ok) {
        return {
          content: [{ type: "text", text: result.error.message }],
          isError: true,
        };
      }

      const value = result.value;

      return formatResult(value, apiCall);
    },
  };
