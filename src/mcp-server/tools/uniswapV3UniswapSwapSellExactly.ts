/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { uniswapV3UniswapSwapSellExactly } from "../../funcs/uniswapV3UniswapSwapSellExactly.js";
import * as components from "../../models/components/index.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  request: components.UniswapSellExactlyRequest$inboundSchema,
};

export const tool$uniswapV3UniswapSwapSellExactly: ToolDefinition<typeof args> =
  {
    name: "uniswap-v3-uniswap-swap-sell-exactly",
    description: `Sell exact amount

This endpoint allows users to trade a specific amount of one token into another
token using the Uniswap protocol.

The transaction is executed on the specified blockchain network, and the user must
provide the necessary transaction details, including the token to sell, the token to
receive, and the amount to sell. If the token being sold is ETH and needs to be
wrapped, the appropriate amount will be wrapped automatically.
                    <Info>
                    **Required Allowances**

                        In order to make this transaction, token allowances need to be set for the following contracts.

                     - \`UniswapV3Router\`
                    </Info>
                `,
    args,
    tool: async (client, args, ctx) => {
      const [result, apiCall] = await uniswapV3UniswapSwapSellExactly(
        client,
        args.request,
        { fetchOptions: { signal: ctx.signal } },
      ).$inspect();

      if (!result.ok) {
        return {
          content: [{ type: "text", text: result.error.message }],
          isError: true,
        };
      }

      const value = result.value;

      return formatResult(value, apiCall);
    },
  };
