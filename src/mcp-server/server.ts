/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { CompassApiSDKCore } from "../core.js";
import { SDKOptions } from "../lib/config.js";
import type { ConsoleLogger } from "./console-logger.js";
import { createRegisterPrompt } from "./prompts.js";
import {
  createRegisterResource,
  createRegisterResourceTemplate,
} from "./resources.js";
import { MCPScope } from "./scopes.js";
import { createRegisterTool } from "./tools.js";
import { tool$aaveV3AaveAaveSupportedTokens } from "./tools/aaveV3AaveAaveSupportedTokens.js";
import { tool$aaveV3AaveAvgRate } from "./tools/aaveV3AaveAvgRate.js";
import { tool$aaveV3AaveBorrow } from "./tools/aaveV3AaveBorrow.js";
import { tool$aaveV3AaveHistoricalTransactions } from "./tools/aaveV3AaveHistoricalTransactions.js";
import { tool$aaveV3AaveLiquidityChange } from "./tools/aaveV3AaveLiquidityChange.js";
import { tool$aaveV3AaveRate } from "./tools/aaveV3AaveRate.js";
import { tool$aaveV3AaveRepay } from "./tools/aaveV3AaveRepay.js";
import { tool$aaveV3AaveReserveOverview } from "./tools/aaveV3AaveReserveOverview.js";
import { tool$aaveV3AaveStdRate } from "./tools/aaveV3AaveStdRate.js";
import { tool$aaveV3AaveSupply } from "./tools/aaveV3AaveSupply.js";
import { tool$aaveV3AaveTokenPrice } from "./tools/aaveV3AaveTokenPrice.js";
import { tool$aaveV3AaveUserPositionPerToken } from "./tools/aaveV3AaveUserPositionPerToken.js";
import { tool$aaveV3AaveUserPositionSummary } from "./tools/aaveV3AaveUserPositionSummary.js";
import { tool$aaveV3AaveWithdraw } from "./tools/aaveV3AaveWithdraw.js";
import { tool$aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionIncrease } from "./tools/aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionIncrease.js";
import { tool$aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionMint } from "./tools/aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionMint.js";
import { tool$aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionPositions } from "./tools/aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionPositions.js";
import { tool$aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionWithdraw } from "./tools/aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionWithdraw.js";
import { tool$aerodromeSlipstreamAerodromeSlipstreamPoolPrice } from "./tools/aerodromeSlipstreamAerodromeSlipstreamPoolPrice.js";
import { tool$aerodromeSlipstreamAerodromeSlipstreamSwapBuyExactly } from "./tools/aerodromeSlipstreamAerodromeSlipstreamSwapBuyExactly.js";
import { tool$aerodromeSlipstreamAerodromeSlipstreamSwapSellExactly } from "./tools/aerodromeSlipstreamAerodromeSlipstreamSwapSellExactly.js";
import { tool$erc4626VaultsVaultsDeposit } from "./tools/erc4626VaultsVaultsDeposit.js";
import { tool$erc4626VaultsVaultsVault } from "./tools/erc4626VaultsVaultsVault.js";
import { tool$erc4626VaultsVaultsWithdraw } from "./tools/erc4626VaultsVaultsWithdraw.js";
import { tool$ethenaEthenaDeposit } from "./tools/ethenaEthenaDeposit.js";
import { tool$ethenaEthenaRequest } from "./tools/ethenaEthenaRequest.js";
import { tool$ethenaEthenaUnstake } from "./tools/ethenaEthenaUnstake.js";
import { tool$ethenaEthenaVault } from "./tools/ethenaEthenaVault.js";
import { tool$morphoMorphoBorrow } from "./tools/morphoMorphoBorrow.js";
import { tool$morphoMorphoDeposit } from "./tools/morphoMorphoDeposit.js";
import { tool$morphoMorphoMarket } from "./tools/morphoMorphoMarket.js";
import { tool$morphoMorphoMarketPosition } from "./tools/morphoMorphoMarketPosition.js";
import { tool$morphoMorphoMarkets } from "./tools/morphoMorphoMarkets.js";
import { tool$morphoMorphoRepay } from "./tools/morphoMorphoRepay.js";
import { tool$morphoMorphoSupplyCollateral } from "./tools/morphoMorphoSupplyCollateral.js";
import { tool$morphoMorphoUserPosition } from "./tools/morphoMorphoUserPosition.js";
import { tool$morphoMorphoVault } from "./tools/morphoMorphoVault.js";
import { tool$morphoMorphoVaults } from "./tools/morphoMorphoVaults.js";
import { tool$morphoMorphoWithdraw } from "./tools/morphoMorphoWithdraw.js";
import { tool$morphoMorphoWithdrawCollateral } from "./tools/morphoMorphoWithdrawCollateral.js";
import { tool$pendlePendleLiquidity } from "./tools/pendlePendleLiquidity.js";
import { tool$pendlePendleMarket } from "./tools/pendlePendleMarket.js";
import { tool$pendlePendleMarkets } from "./tools/pendlePendleMarkets.js";
import { tool$pendlePendlePositions } from "./tools/pendlePendlePositions.js";
import { tool$pendlePendlePt } from "./tools/pendlePendlePt.js";
import { tool$pendlePendleRedeemYield } from "./tools/pendlePendleRedeemYield.js";
import { tool$pendlePendleYt } from "./tools/pendlePendleYt.js";
import { tool$skySkyBuy } from "./tools/skySkyBuy.js";
import { tool$skySkyDeposit } from "./tools/skySkyDeposit.js";
import { tool$skySkyPosition } from "./tools/skySkyPosition.js";
import { tool$skySkySell } from "./tools/skySkySell.js";
import { tool$skySkyWithdraw } from "./tools/skySkyWithdraw.js";
import { tool$smartAccountSmartAccountBatchedUserOperations } from "./tools/smartAccountSmartAccountBatchedUserOperations.js";
import { tool$swapSwapOdos } from "./tools/swapSwapOdos.js";
import { tool$tokenTokenBalance } from "./tools/tokenTokenBalance.js";
import { tool$tokenTokenPrice } from "./tools/tokenTokenPrice.js";
import { tool$tokenTokenTransfer } from "./tools/tokenTokenTransfer.js";
import { tool$transactionBundlerTransactionBundlerAaveLoop } from "./tools/transactionBundlerTransactionBundlerAaveLoop.js";
import { tool$transactionBundlerTransactionBundlerAuthorization } from "./tools/transactionBundlerTransactionBundlerAuthorization.js";
import { tool$transactionBundlerTransactionBundlerExecute } from "./tools/transactionBundlerTransactionBundlerExecute.js";
import { tool$uniswapV3UniswapLiquidityProvisionIncrease } from "./tools/uniswapV3UniswapLiquidityProvisionIncrease.js";
import { tool$uniswapV3UniswapLiquidityProvisionInRange } from "./tools/uniswapV3UniswapLiquidityProvisionInRange.js";
import { tool$uniswapV3UniswapLiquidityProvisionMint } from "./tools/uniswapV3UniswapLiquidityProvisionMint.js";
import { tool$uniswapV3UniswapLiquidityProvisionPositions } from "./tools/uniswapV3UniswapLiquidityProvisionPositions.js";
import { tool$uniswapV3UniswapLiquidityProvisionWithdraw } from "./tools/uniswapV3UniswapLiquidityProvisionWithdraw.js";
import { tool$uniswapV3UniswapPoolPrice } from "./tools/uniswapV3UniswapPoolPrice.js";
import { tool$uniswapV3UniswapQuoteBuyExactly } from "./tools/uniswapV3UniswapQuoteBuyExactly.js";
import { tool$uniswapV3UniswapQuoteSellExactly } from "./tools/uniswapV3UniswapQuoteSellExactly.js";
import { tool$uniswapV3UniswapSwapBuyExactly } from "./tools/uniswapV3UniswapSwapBuyExactly.js";
import { tool$uniswapV3UniswapSwapSellExactly } from "./tools/uniswapV3UniswapSwapSellExactly.js";
import { tool$universalGenericAllowance } from "./tools/universalGenericAllowance.js";
import { tool$universalGenericAllowanceSet } from "./tools/universalGenericAllowanceSet.js";
import { tool$universalGenericEns } from "./tools/universalGenericEns.js";
import { tool$universalGenericPortfolio } from "./tools/universalGenericPortfolio.js";
import { tool$universalGenericSupportedChains } from "./tools/universalGenericSupportedChains.js";
import { tool$universalGenericUnwrapWeth } from "./tools/universalGenericUnwrapWeth.js";
import { tool$universalGenericWrapEth } from "./tools/universalGenericWrapEth.js";

export function createMCPServer(deps: {
  logger: ConsoleLogger;
  allowedTools?: string[] | undefined;
  scopes?: MCPScope[] | undefined;
  serverURL?: string | undefined;
  apiKeyAuth?: SDKOptions["apiKeyAuth"] | undefined;
  serverIdx?: SDKOptions["serverIdx"] | undefined;
}) {
  const server = new McpServer({
    name: "CompassApiSDK",
    version: "1.1.0",
  });

  const client = new CompassApiSDKCore({
    apiKeyAuth: deps.apiKeyAuth,
    serverURL: deps.serverURL,
    serverIdx: deps.serverIdx,
  });

  const scopes = new Set(deps.scopes);

  const allowedTools = deps.allowedTools && new Set(deps.allowedTools);
  const tool = createRegisterTool(
    deps.logger,
    server,
    client,
    scopes,
    allowedTools,
  );
  const resource = createRegisterResource(deps.logger, server, client, scopes);
  const resourceTemplate = createRegisterResourceTemplate(
    deps.logger,
    server,
    client,
    scopes,
  );
  const prompt = createRegisterPrompt(deps.logger, server, client, scopes);
  const register = { tool, resource, resourceTemplate, prompt };
  void register; // suppress unused warnings

  tool(tool$aaveV3AaveAaveSupportedTokens);
  tool(tool$aaveV3AaveRate);
  tool(tool$aaveV3AaveAvgRate);
  tool(tool$aaveV3AaveStdRate);
  tool(tool$aaveV3AaveReserveOverview);
  tool(tool$aaveV3AaveTokenPrice);
  tool(tool$aaveV3AaveLiquidityChange);
  tool(tool$aaveV3AaveUserPositionSummary);
  tool(tool$aaveV3AaveUserPositionPerToken);
  tool(tool$aaveV3AaveHistoricalTransactions);
  tool(tool$aaveV3AaveSupply);
  tool(tool$aaveV3AaveBorrow);
  tool(tool$aaveV3AaveRepay);
  tool(tool$aaveV3AaveWithdraw);
  tool(tool$aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionPositions);
  tool(tool$aerodromeSlipstreamAerodromeSlipstreamPoolPrice);
  tool(tool$aerodromeSlipstreamAerodromeSlipstreamSwapSellExactly);
  tool(tool$aerodromeSlipstreamAerodromeSlipstreamSwapBuyExactly);
  tool(tool$aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionMint);
  tool(tool$aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionIncrease);
  tool(tool$aerodromeSlipstreamAerodromeSlipstreamLiquidityProvisionWithdraw);
  tool(tool$morphoMorphoVaults);
  tool(tool$morphoMorphoVault);
  tool(tool$morphoMorphoMarkets);
  tool(tool$morphoMorphoMarket);
  tool(tool$morphoMorphoMarketPosition);
  tool(tool$morphoMorphoUserPosition);
  tool(tool$morphoMorphoDeposit);
  tool(tool$morphoMorphoWithdraw);
  tool(tool$morphoMorphoSupplyCollateral);
  tool(tool$morphoMorphoWithdrawCollateral);
  tool(tool$morphoMorphoBorrow);
  tool(tool$morphoMorphoRepay);
  tool(tool$skySkyPosition);
  tool(tool$skySkyBuy);
  tool(tool$skySkySell);
  tool(tool$skySkyDeposit);
  tool(tool$skySkyWithdraw);
  tool(tool$tokenTokenPrice);
  tool(tool$tokenTokenBalance);
  tool(tool$tokenTokenTransfer);
  tool(tool$uniswapV3UniswapQuoteBuyExactly);
  tool(tool$uniswapV3UniswapQuoteSellExactly);
  tool(tool$uniswapV3UniswapPoolPrice);
  tool(tool$uniswapV3UniswapLiquidityProvisionInRange);
  tool(tool$uniswapV3UniswapLiquidityProvisionPositions);
  tool(tool$uniswapV3UniswapSwapBuyExactly);
  tool(tool$uniswapV3UniswapSwapSellExactly);
  tool(tool$uniswapV3UniswapLiquidityProvisionMint);
  tool(tool$uniswapV3UniswapLiquidityProvisionIncrease);
  tool(tool$uniswapV3UniswapLiquidityProvisionWithdraw);
  tool(tool$universalGenericPortfolio);
  tool(tool$universalGenericSupportedChains);
  tool(tool$universalGenericAllowance);
  tool(tool$universalGenericEns);
  tool(tool$universalGenericWrapEth);
  tool(tool$universalGenericUnwrapWeth);
  tool(tool$universalGenericAllowanceSet);
  tool(tool$pendlePendleMarket);
  tool(tool$pendlePendlePositions);
  tool(tool$pendlePendleMarkets);
  tool(tool$pendlePendlePt);
  tool(tool$pendlePendleYt);
  tool(tool$pendlePendleLiquidity);
  tool(tool$pendlePendleRedeemYield);
  tool(tool$swapSwapOdos);
  tool(tool$transactionBundlerTransactionBundlerAuthorization);
  tool(tool$transactionBundlerTransactionBundlerExecute);
  tool(tool$transactionBundlerTransactionBundlerAaveLoop);
  tool(tool$smartAccountSmartAccountBatchedUserOperations);
  tool(tool$erc4626VaultsVaultsVault);
  tool(tool$erc4626VaultsVaultsDeposit);
  tool(tool$erc4626VaultsVaultsWithdraw);
  tool(tool$ethenaEthenaVault);
  tool(tool$ethenaEthenaDeposit);
  tool(tool$ethenaEthenaRequest);
  tool(tool$ethenaEthenaUnstake);

  return server;
}
